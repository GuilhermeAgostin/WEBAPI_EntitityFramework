CREATE DATABASE TESTECAPI

USE TESTECAPI

CREATE TABLE TB_Perfil
(
	IdPerfil INT IDENTITY (1,1) PRIMARY KEY,
	Nome VARCHAR(50) NOT NULL,
	CONSTRAINT UC_Perfil UNIQUE (Nome),
	Removido BIT NOT NULL DEFAULT 0 WITH VALUES 
)

CREATE TABLE TB_Cliente 
(
    IdCliente INT IDENTITY (1,1)PRIMARY KEY,
    Nome VARCHAR(50) NOT NULL,
	IdPerfil INT FOREIGN KEY REFERENCES TB_Perfil(IdPerfil),
    Telefone VARCHAR(14) NOT NULL, 
    Email VARCHAR(20) NOT NULL,
    CPF VARCHAR(11) NOT NULL,
	DataCadastro DATETIME NOT NULL,
	DataNasc DATETIME NOT NULL,
	Sexo VARCHAR(1) NOT NULL,
	UltimaAtualizacao DATETIME NULL,
	CONSTRAINT UC_Cliente UNIQUE (CPF)
)

CREATE TABLE TB_Endereco(
   IdEndereco INT IDENTITY (1,1) PRIMARY KEY,
   Numero INT NOT NULL,	
   Complemento VARCHAR(100) NULL, 
   Bairro VARCHAR (50) NOT NULL,
   Municipio VARCHAR (50) NOT NULL,
   CEP VARCHAR(9) NOT NULL,
   IdCliente INT FOREIGN KEY REFERENCES TB_Cliente NOT NULL,
   PontoReferencia VARCHAR (100) NULL, 
   Latitude VARCHAR (20) NULL,
   Longitude VARCHAR (20) NULL,
   Estado VARCHAR(2) NOT NULL,
   Removido BIT NOT NULL DEFAULT 0 
   CONSTRAINT UC_Endereco UNIQUE (Latitude, Longitude, Numero)
);